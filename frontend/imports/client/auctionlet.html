<template name="auctionlet">
  {{#if currentAuctionletId}}
  <div class="row">
    <div class="auctionlet-section boxDiv col-md-12">
      <h2>Auctionlet #{{auctionlet.auctionletId}}</h2>
      {{#unless auctionNotFound}}
        <table class="table">
          {{#if unclaimed}}
          <tr>
            <td>Selling</td>
            <td>{{formatBalance (fromWei auctionlet.sell_amount)}} <span class="MKR">{{MKRToken.name}}</span></td>
          </tr>
          {{#unless auctionlet.base}}
            <tr>
              <td>Last bidder</td>
              <td><a href="{{etherscanHref}}{{auctionlet.last_bidder}}">{{auctionlet.last_bidder}}</a></td>
            </tr>
            <tr>
              <td>Last bid time</td>
              <td>{{auctionlet.last_bid_time}}</td>
            </tr>
            <tr>
              <td>Time remaining</td>
              <td>{{countdown timeRemaining}}</td>
            </tr>
          {{/unless}}
          <tr>
            {{#if auctionlet.base}}
              <td>Initial bid</td>
            {{else}}
              <td>Highest bid</td>
            {{/if}}
            <td>{{formatBalance (fromWei auctionlet.buy_amount)}} <span class="ETH">{{ETHToken.name}}</span></td>
          </tr>
          <tr>
            <td>Unit price</td>
            <td>{{formatBalance (auctionlet.unit_price)}} <span class="ETH">{{ETHToken.name}}</span>/<span class="MKR">{{MKRToken.name}}</span></td>
          </tr>
          {{/if}}
        </table>
        {{#unless expired}}
          {{> newbid auctionlet=auctionlet}}
        {{else}}
        <div class="form-group">
          <span>Auctionlet has expired.</span>
          {{#unless unclaimed}}
            <br/>
            <span>The tokens have been claimed by the auctionlet winner</span>
            <br/>
            <table class="table">
              <tr>
              <td>Sold</td>
                <td>{{formatBalance (fromWei auctionlet.sell_amount)}} <span class="MKR">{{MKRToken.name}}</span></td>
              </tr>
              <tr>
                <td>Winning bid</td>
              <td>{{formatBalance (fromWei auctionlet.buy_amount)}} <span class="ETH">{{ETHToken.name}}</span></td>
              </tr>
              <tr>
                <td>Unit price</td>
                <td>{{formatBalance (auctionlet.unit_price)}} <span class="ETH">{{ETHToken.name}}</span>/<span class="MKR">{{MKRToken.name}}</span></td>
              </tr>
              <tr>
                <td>Last bid time</td>
                <td>{{auctionlet.last_bid_time}}</td>
              </tr>
            </table>
          {{/unless}}
          {{#if auctionwinner}}
            {{#if auctionlet.unclaimed}}
            <br>
              <span>You made the highest bid. Click to receive the tokens</span>
              <button class="btn btn-primary" {{b "click: claim"}}>Claim</button><br>
              {{#if claimMessage}}
                <span id='spnClaimMessage' class="messageSpan alert alert-{{claimMessageType}}">{{{ claimMessage }}}</span>
              {{/if}}
            {{/if}}
          {{/if}}
        </div>
        {{/unless}}
      {{else}}
        <span>Auctionlet was not found</span>
      {{/unless}}
    </div>
  </div>
    {{#if unclaimed}}
      {{> bidHistory auctionlet=auctionlet}}
    {{/if}}
  {{/if}}
</template>
